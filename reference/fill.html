<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Fill in missing values with previous or next value — fill • poorman</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Fill in missing values with previous or next value — fill"><meta name="description" content="Fills missing values in selected columns using the next or previous entry. This is useful in the common output format
where values are not repeated, and are only recorded when they change."><meta property="og:description" content="Fills missing values in selected columns using the next or previous entry. This is useful in the common output format
where values are not repeated, and are only recorded when they change."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">poorman</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fa-newspaper-o"></span> News</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/nathaneastwood/poorman/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Fill in missing values with previous or next value</h1>
      <small class="dont-index">Source: <a href="https://github.com/nathaneastwood/poorman/blob/master/R/fill.R" class="external-link"><code>R/fill.R</code></a></small>
      <div class="d-none name"><code>fill.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fills missing values in selected columns using the next or previous entry. This is useful in the common output format
where values are not repeated, and are only recorded when they change.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">fill</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span>, .direction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"down"</span>, <span class="st">"up"</span>, <span class="st">"downup"</span>, <span class="st">"updown"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A <code>data.frame</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Columns to fill.</p></dd>


<dt id="arg--direction">.direction<a class="anchor" aria-label="anchor" href="#arg--direction"></a></dt>
<dd><p>Direction in which to fill missing values. Currently either <code>"down"</code> (the default), <code>"up"</code>,
<code>"downup"</code> (i.e. first down and then up) or <code>"updown"</code> (first up and then down).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Missing values are replaced in atomic vectors; <code>NULL</code>s are replaced in lists.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Value (year) is recorded only when it changes</span></span></span>
<span class="r-in"><span><span class="va">sales</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  quarter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span>, <span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span>, <span class="st">"Q1"</span>, <span class="st">"Q2"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Q3"</span>, <span class="st">"Q4"</span>, <span class="st">"Q1"</span>, <span class="st">"Q2"</span>, <span class="st">"Q3"</span>, <span class="st">"Q4"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2000</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">2001</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">2002</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">2004</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  sales <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fl">66013</span>, <span class="fl">69182</span>, <span class="fl">53175</span>, <span class="fl">21001</span>, <span class="fl">46036</span>, <span class="fl">58842</span>, <span class="fl">44568</span>, <span class="fl">50197</span>, <span class="fl">39113</span>, <span class="fl">41668</span>, <span class="fl">30144</span>,</span></span>
<span class="r-in"><span>    <span class="fl">52897</span>, <span class="fl">32129</span>, <span class="fl">67686</span>, <span class="fl">31768</span>, <span class="fl">49094</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `fill()` defaults to replacing missing data from top to bottom</span></span></span>
<span class="r-in"><span><span class="va">sales</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> <span class="fu">fill</span><span class="op">(</span><span class="va">year</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    quarter year sales</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       Q1 2000 66013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2       Q2 2000 69182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       Q3 2000 53175</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4       Q4 2000 21001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5       Q1 2001 46036</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6       Q2 2001 58842</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7       Q3 2001 44568</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8       Q4 2001 50197</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9       Q1 2002 39113</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10      Q2 2002 41668</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11      Q3 2002 30144</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12      Q4 2002 52897</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13      Q1 2004 32129</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14      Q2 2004 67686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15      Q3 2004 31768</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16      Q4 2004 49094</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Value (pet_type) is missing above</span></span></span>
<span class="r-in"><span><span class="va">tidy_pets</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  rank <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span>, <span class="fl">4L</span>, <span class="fl">5L</span>, <span class="fl">6L</span>, <span class="fl">1L</span>, <span class="fl">2L</span>, <span class="fl">3L</span>, <span class="fl">4L</span>, <span class="fl">5L</span>, <span class="fl">6L</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  pet_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Dog"</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"Cat"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  breed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Boston Terrier"</span>, <span class="st">"Retrievers (Labrador)"</span>, <span class="st">"Retrievers (Golden)"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"French Bulldogs"</span>, <span class="st">"Bulldogs"</span>, <span class="st">"Beagles"</span>, <span class="st">"Persian"</span>, <span class="st">"Maine Coon"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Ragdoll"</span>, <span class="st">"Exotic"</span>, <span class="st">"Siamese"</span>, <span class="st">"American Short"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For values that are missing above you can use `.direction = "up"`</span></span></span>
<span class="r-in"><span><span class="va">tidy_pets</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">fill</span><span class="op">(</span><span class="va">pet_type</span>, .direction <span class="op">=</span> <span class="st">"up"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    rank pet_type                 breed</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1     1      Dog        Boston Terrier</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2     2      Dog Retrievers (Labrador)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     3      Dog   Retrievers (Golden)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4     4      Dog       French Bulldogs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     5      Dog              Bulldogs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     6      Dog               Beagles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7     1      Cat               Persian</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8     2      Cat            Maine Coon</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9     3      Cat               Ragdoll</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10    4      Cat                Exotic</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11    5      Cat               Siamese</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12    6      Cat        American Short</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Value (n_squirrels) is missing above and below within a group</span></span></span>
<span class="r-in"><span><span class="va">squirrels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Sam"</span>, <span class="st">"Mara"</span>, <span class="st">"Jesse"</span>, <span class="st">"Tom"</span>, <span class="st">"Mike"</span>, <span class="st">"Rachael"</span>, <span class="st">"Sydekea"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Gabriela"</span>, <span class="st">"Derrick"</span>, <span class="st">"Kara"</span>, <span class="st">"Emily"</span>, <span class="st">"Danielle"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Observer"</span>, <span class="st">"Scorekeeper"</span>, <span class="st">"Observer"</span>, <span class="st">"Observer"</span>, <span class="st">"Observer"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Observer"</span>, <span class="st">"Scorekeeper"</span>, <span class="st">"Observer"</span>, <span class="st">"Observer"</span>, <span class="st">"Scorekeeper"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Observer"</span>, <span class="st">"Observer"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  n_squirrels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">8</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">14</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">9</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The values are inconsistently missing by position within the group</span></span></span>
<span class="r-in"><span><span class="co"># Use .direction = "downup" to fill missing values in both directions</span></span></span>
<span class="r-in"><span><span class="va">squirrels</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="group_by.html">group_by</a></span><span class="op">(</span><span class="va">group</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">fill</span><span class="op">(</span><span class="va">n_squirrels</span>, .direction <span class="op">=</span> <span class="st">"downup"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding missing grouping variables: `group`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding missing grouping variables: `group`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding missing grouping variables: `group`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    group     name        role n_squirrels</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1      Sam    Observer           8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1     Mara Scorekeeper           8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1    Jesse    Observer           8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1      Tom    Observer           8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      2     Mike    Observer          14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      2  Rachael    Observer          14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      2  Sydekea Scorekeeper          14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      2 Gabriela    Observer          14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      3  Derrick    Observer           9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     3     Kara Scorekeeper           9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     3    Emily    Observer           9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     3 Danielle    Observer           9</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using `.direction = "updown"` accomplishes the same goal in this example</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://nathaneastwood.github.io" class="external-link">Nathan Eastwood</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

